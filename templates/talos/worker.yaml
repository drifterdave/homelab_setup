version: v1alpha1
metadata:
  name: ${node_name}
  labels:
    node-type: worker
machine:
  type: worker
  kubelet:
    extraArgs:
      node-labels: "node-type=worker"
  network:
    interfaces:
      - interface: eth0
        addresses:
          - ${private_ipv4}
        routes:
          - network: 0.0.0.0/0
            gateway: ${gateway}
    nameservers:
      - 8.8.8.8
      - 1.1.1.1
cluster:
  network:
    cni:
      name: flannel
    podSubnets:
      - ${pod_cidr}
    serviceSubnets:
      - ${service_cidr}
    dnsDomain: ${dns_domain}
install:
  extensions:
    - image: siderolabs/tailscale:${talos_version}
    - image: siderolabs/qemu-guest-agent:${talos_version}
